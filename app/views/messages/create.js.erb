
function refreshForm(innerHTML) {
  const newMessageForm = document.getElementById('create-message');
  newMessageForm.innerHTML = innerHTML;
  newMessageForm.blur();
}

function addMessage(messageHTML) {
  const messagesContainer = document.querySelector('.messages');
  messagesContainer.insertAdjacentHTML('beforeend', messageHTML);
}

function clearMessage() {
  const input = document.getElementById('message_content');
  input.value = '';
  // input.blur();
}

function scrollMessagesIntoView() {
  const messages = document.querySelectorAll('.message');
  const lastMessage = messages[messages.length - 1];
  if (lastMessage !== undefined) {
    lastMessage.scrollIntoView();
  }
}




<% if @message.errors.any? %>
  addMessage('<%= j render "message", message: @message, user_is_messages_author: true %>');
  // handle error messages later
<% else %>
  addMessage('<%= j render "message", message: @message, user_is_messages_author: true %>');
  clearMessage();
  scrollMessagesIntoView();
<% end %>
